<script>
  document.addEventListener('DOMContentLoaded', () => {
    const emisoras = [
      { id: 'la-fuerte', url: 'https://panelautodj.innovatestream.pe:7322/statistics?json=1' },
      { id: 'la-jefa', url: 'https://panelautodj.innovatestream.pe:7320/statistics?json=1' },
      { id: 'san-francisco', url: 'https://panelautodj.innovatestream.pe:7324/statistics?json=1' },
      { id: 'maxima', url: 'https://panelautodj.innovatestream.pe:8342/statistics?json=1' },
      { id: 'la-cumbiambera', url: 'https://panelautodj.innovatestream.pe:8464/statistics?json=1' },
      { id: 'la-raya', url: 'https://panelautodj.innovatestream.pe:8466/statistics?json=1' },
    ];

    emisoras.forEach(emisora => {
      fetch(emisora.url)
        .then(res => {
          if (!res.ok) throw new Error('HTTP ' + res.status);
          return res.json();
        })
        .then(data => {
          const titulo = data?.songtitle || 'No hay información';
          const elemento = document.querySelector(`#${emisora.id} .titulo-cancion`);
          if (elemento) {
            elemento.textContent = titulo;
          }
        })
        .catch(e => {
          console.error('Error cargando título', emisora.id, e);
          const elemento = document.querySelector(`#${emisora.id} .titulo-cancion`);
          if (elemento) {
            elemento.textContent = 'No disponible';
          }
        });
    });
  });
</script>
