<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Tremenda 106.5 FM</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  min-height:100vh;
  background:linear-gradient(140deg,#b30000,#ff5e00,#ffb300);
  background-size:300% 300%;
  animation:fondo 12s ease infinite;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}

@keyframes fondo{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.app{
  width:92%;
  max-width:420px;
  background:rgba(0,0,0,.65);
  backdrop-filter:blur(12px);
  border-radius:25px;
  padding:25px 20px;
  box-shadow:0 0 40px rgba(0,0,0,.7);
  text-align:center;
  color:#fff;
  margin-top:20px;
}

.title{
  font-size:26px;
  font-weight:900;
  margin-bottom:8px;
  letter-spacing:1px;
}

.logo{
  width:160px;
  margin:10px 0 15px;
}

.player-box{
  background:rgba(255,255,255,.08);
  border-radius:20px;
  padding:20px;
}

.status{
  font-weight:600;
  margin-bottom:10px;
  color:#00ff88;
  font-size:14px;
}

.play{
  padding:18px;
  width:100%;
  font-size:20px;
  font-weight:700;
  border:none;
  border-radius:12px;
  background:#00c853;
  color:#fff;
  cursor:pointer;
  transition:.3s;
}

.play:hover{
  transform:scale(1.05);
}

.volume{
  margin-top:15px;
}

input[type=range]{
  width:100%;
}

.metadata-box{
  margin-top:18px;
  padding:12px;
  border-radius:12px;
  background:rgba(255,255,255,.08);
}

.metadata-title{
  font-size:12px;
  opacity:.7;
  margin-bottom:6px;
  letter-spacing:1px;
}

.metadata-song{
  font-size:15px;
  font-weight:600;
  min-height:20px;
}

.social-container{
  display:flex;
  gap:10px;
  margin-top:18px;
}

.social-box{
  flex:1;
  padding:12px;
  border-radius:12px;
  font-weight:600;
  text-decoration:none;
  color:#fff;
  text-align:center;
  transition:.3s;
}

.facebook{
  background:#1877f2;
}

.whatsapp{
  background:#00c853;
}

.social-box:hover{
  transform:scale(1.05);
}

.footer{
  margin-top:15px;
  font-size:12px;
  opacity:.7;
}
</style>
</head>

<body>

<div class="app" id="app">

  <div class="title">LA TREMENDA 106.5 FM</div>

  <img src="https://imgfz.com/i/h7TrEm5.png" class="logo">

  <div class="player-box">

    <div class="status" id="estado">ðŸ”´ EN VIVO</div>

    <button class="play" id="btn">â–¶ REPRODUCIR</button>

    <div class="volume">
      <input type="range" min="0" max="1" step="0.01" value="1" id="volumen">
    </div>

    <div class="metadata-box">
      <div class="metadata-title">SONANDO AHORA</div>
      <div class="metadata-song" id="cancion">
        Cargando informaciÃ³n...
      </div>
    </div>

  </div>

  <div class="social-container">
    <a class="social-box facebook" href="https://www.facebook.com/profile.php?id=61585616422921" target="_blank">
      Facebook
    </a>

    <a class="social-box whatsapp" href="https://wa.me/51942883375" target="_blank">
      WhatsApp
    </a>
  </div>

</div>

<div class="footer">
  DiseÃ±o por Marcony Clavijo â€“ Radio La Tremenda
</div>

<script>
const btn = document.getElementById("btn");
const estado = document.getElementById("estado");
const vol = document.getElementById("volumen");
const cancion = document.getElementById("cancion");

let audio = null;
let sonando = false;

function crearAudio() {
  if (audio) {
    audio.pause();
    audio.src = "";
    audio.load();
  }

  audio = new Audio("https://sonic.globalstream.pro/8080/stream");
  audio.preload = "none";
  audio.volume = vol.value;
}

btn.onclick = () => {
  if (!sonando) {

    crearAudio();
    estado.textContent = "Conectando...";
    btn.textContent = "Cargando...";

    audio.play()
      .then(() => {
        estado.textContent = "ðŸŽ§ EN VIVO";
        btn.textContent = "â¸ DETENER";
        sonando = true;
      })
      .catch(() => {
        estado.textContent = "Error de conexiÃ³n";
        btn.textContent = "â–¶ REPRODUCIR";
      });

  } else {

    audio.pause();
    audio.src = "";
    audio.load();

    estado.textContent = "TransmisiÃ³n detenida";
    btn.textContent = "â–¶ REPRODUCIR";
    sonando = false;
  }
};

vol.oninput = () => {
  if (audio) audio.volume = vol.value;
};

/* ===== METADATA PARA GITHUB ===== */

async function obtenerMetadata() {
  try {

    const proxy = "https://api.allorigins.win/raw?url=";
    const url = encodeURIComponent("https://sonic.globalstream.pro/8080/status-json.xsl");

    const response = await fetch(proxy + url);
    const data = await response.json();

    let source = data.icestats.source;

    if (Array.isArray(source)) {
      source = source[0];
    }

    if (source && source.title) {
      cancion.textContent = source.title;
    } else {
      cancion.textContent = "TransmisiÃ³n en vivo";
    }

  } catch (error) {
    cancion.textContent = "La Tremenda 106.5 FM";
  }
}

setInterval(obtenerMetadata, 10000);
obtenerMetadata();

</script>

</body>
</html>